<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Cporm : Content Provider Orm - This is a little orm that functions by using android content providers">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cporm</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Wackymax/CPOrm">View on GitHub</a>

          <h1 id="project_title">Cporm</h1>
          <h2 id="project_tagline">Content Provider Orm - This is a little orm that functions by using android content providers</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Wackymax/CPOrm/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Wackymax/CPOrm/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="cporm" class="anchor" href="#cporm" aria-hidden="true"><span class="octicon octicon-link"></span></a>CPOrm</h1>

<p><a href="https://android-arsenal.com/details/1/2676"><img src="https://img.shields.io/badge/Android%20Arsenal-CPOrm-green.svg?style=flat" alt="Android Arsenal"></a></p>

<p>Content Provider ORM for android.  This ORM uses an android sqlite database as a backing store, but interactes with it using  content providers.  You use it like a normal ORM, by creating java objects, and then do all of you interations through the objects. And you get the added benefits of using it like normal content providers, so integration with list views and other components are simple.</p>

<p>Have look at the <a href="https://github.com/Wackymax/CPOrm/wiki">Wiki</a> for more information.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ol>
<li>Supports table creation from the data model.</li>
<li>Supports view creation from the data model.</li>
<li>Advanced querying capabilities, allowing you to created complex queries easily.</li>
<li>It is extendable, allowing you to define custom column type mappings.</li>
<li>It is really quick to query, as well as doing bulk inserts. From my own tests you can insert around 5000 objects per second and queries return around 9 000 objects per second.</li>
<li>Allows you to add table change listeners for views.</li>
<li>Most importantly, it is easy to use.</li>
</ol>

<h2>
<a id="install-it" class="anchor" href="#install-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install it</h2>

<p>There are four ways to install CPOrm:</p>

<h4>
<a id="as-a-gradle-dependency" class="anchor" href="#as-a-gradle-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>As a Gradle dependency</h4>

<p>This is the preferred way. Simply add:</p>

<div class="highlight highlight-source-groovy"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>za.co.cporm:CPOrm:2.96<span class="pl-pds">'</span></span></pre></div>

<p>to your project dependencies and run <code>gradle build</code> or <code>gradle assemble</code>.</p>

<h4>
<a id="as-a-maven-dependency" class="anchor" href="#as-a-maven-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>As a Maven dependency</h4>

<p>Declare the dependency in Maven:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;za.co.cporm&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;CPOrm&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;2.96&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<h4>
<a id="as-a-library-project" class="anchor" href="#as-a-library-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>As a library project</h4>

<p>Download the source code and import it as a library project in Eclipse. The project is available in the folder <strong>library</strong>. For more information on how to do this, read <a href="http://developer.android.com/tools/projects/index.html#LibraryProjects">here</a>.</p>

<h4>
<a id="as-a-jar" class="anchor" href="#as-a-jar" aria-hidden="true"><span class="octicon octicon-link"></span></a>As a jar</h4>

<p>Visit the <a href="https://github.com/Wackymax/CPOrm/releases">releases</a> page to download jars directly. You can drop them into your <code>libs</code> folder and configure the Java build path to include the library. See this <a href="http://www.vogella.com/tutorials/AndroidLibraryProjects/article.html">tutorial</a> for an excellent guide on how to do this.</p>

<h1></h1>

<h2>
<a id="use-it" class="anchor" href="#use-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use it</h2>

<p>To use the ORM, include it as a library in you project. Create a configuration that will tell the ORM all the important stuff like the domain model objects, database name etc. You can define a custom SQLColumnMapping factory as well if you want to handle more that the standard java types. </p>

<p>For more information, check out the example app.</p>

<ol>
<li>
<p>Install the project via any of the method above. and extend <code>Application</code> class and use it as following:</p>

<pre><code>public class SampleApplication extends Application {
   @Override
    public void onCreate() {

        super.onCreate();
        CPOrm.initialize(this);
    }
}
</code></pre>
</li>
<li>
<p>register this application class in Manifest file:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">application</span>
       <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>.SampleApplication<span class="pl-pds">"</span></span>
       ...
       &gt;</pre></div>
</li>
<li>
<p>add following meta data in <code>&lt;application&gt;</code> tag</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">meta-data</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>CPORM_CONFIG<span class="pl-pds">"</span></span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>za.co.cporm.example.model.MyCPOrmConfiguration<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">meta-data</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>MAPPING_FACTORY<span class="pl-pds">"</span></span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>om.cp.orm.example.MyMappingFactory<span class="pl-pds">"</span></span> /&gt;<span class="pl-c">&lt;!-- This is optional--&gt;</span>
&lt;<span class="pl-ent">meta-data</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>AUTHORITY<span class="pl-pds">"</span></span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>za.co.cporm.example<span class="pl-pds">"</span></span> /&gt; <span class="pl-c">&lt;!-- Should match provider--&gt;</span></pre></div>
</li>
<li>
<p>register content provider:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">provider</span>
        <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">authorities</span>=<span class="pl-s"><span class="pl-pds">"</span>za.co.cporm.example<span class="pl-pds">"</span></span> &lt;!-- Should match the Authority Meta Tag--&gt;
        android:name="za.co.cporm.provider.CPOrmContentProvider"
        android:exported="false"
        android:process=":provider" /&gt;</pre></div>
</li>
<li>
<p>Now, you just have to create model classes by:</p>

<ul>
<li>
<p>annotation:</p>

<pre><code>@Table
public class Book {
...
}
</code></pre>
</li>
<li>
<p>extending class:</p>

<pre><code>@Table
public class Author extends QuantumFluxRecord&lt;Author&gt; {
    public String name;
    ...
}
</code></pre>
</li>
</ul>

<h5>
<a id="notes" class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes:</h5>

<ul>
<li><p>When you extend CPDefaultRecord you have access to all default access methods such as save(), update(), delete(), etc. and If you are using just <a href="https://github.com/Table" class="user-mention">@Table</a> annotation, you can use those methods from CPOrm class. for e.g. CPOrm.insert(authorObject);.</p></li>
<li><p>When you extend CPDefaultRecord you have already a auto increment primary key with name '_id'. So while using just <a href="https://github.com/Table" class="user-mention">@Table</a> annotation, consider creating a primary key.</p></li>
<li><p>Name of columns and tables will convert from camelCasing to under_score. for e.g. fielf bookName in a model will become book_name in database.</p></li>
</ul>

<h5>
<a id="column-constraint-annotations" class="anchor" href="#column-constraint-annotations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Column Constraint annotations:</h5>

<ul>
<li>
<code>@Column</code> will allow to change name of column and allow to make it NOT NULL. Default values for not null is false. for e.g. </li>
</ul>

<pre><code>@Column(columnName = "cover_name")
private String bookName;
</code></pre>

<pre><code>@Column(required = true)
private String isbn;
</code></pre>

<ul>
<li>
<code>@PrimaryKey</code> will allow to make a column as primary key, and auto increment. Default value for autoIncrement is true.  For now the library only supports keys of type long. for e.g. </li>
</ul>

<pre><code>@PrimaryKey
private String isbn;
</code></pre>

<pre><code>@PrimaryKey(autoIncrement = false)
private String isbn;
</code></pre>

<ul>
<li>
<code>@Unique</code> will allow you to make a column value unique.</li>
</ul>
</li>
<li>
<p>Register your model classes</p>

<pre><code>public class MyCPOrmConfiguration implements CPOrmConfiguration {

      @Override
      public String getDatabaseName() {

          return "example.db";
      }

      @Override
      public int getDatabaseVersion() {

          return 1;
      }

      @Override
      public boolean isQueryLoggingEnabled() {

          return false;
      }

      @Override
      public List&lt;Class&lt;?&gt;&gt; getDataModelObjects() {
          List&lt;Class&lt;?&gt;&gt; domainObjects = new ArrayList&lt;Class&lt;?&gt;&gt;();
          domainObjects.add(Book.class);
          domainObjects.add(Author.class);

          return domainObjects;
      }
  }
</code></pre>
</li>
<li>
<p>Access:</p>

<pre><code>Book book = new Book();
book.name = "Sorcerer's Stone";
book.isbn = "122342564";
CPOrm.insert(book);
</code></pre>

<pre><code>Author author = new Author();
author.name = "J.K. Rollings";
author.save();
</code></pre>

<pre><code>Author first = Select.from(Author.class).first();
first.name = "J. K. Rowling";
first.update();
</code></pre>

<pre><code>QuantumFlux.deleteAll(Book.class);
Author first = Select.from(Author.class).first();
first.delete();
</code></pre>
</li>
</ol>

<h1></h1>

<p>For detailed configuration and advance usages, go through the <a href="https://github.com/Wackymax/CPOrm/wiki">Wiki</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cporm maintained by <a href="https://github.com/Wackymax">Wackymax</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
